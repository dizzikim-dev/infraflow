# OpenClaw + VDI + 내부망 LLM 아키텍처 분석

## 1. 결론 요약

**"OpenClaw + VDI + 내부망 LLM" 조합은 기술적으로 구현 가능합니다.**

OpenClaw는 모델 불가지론적(Model Agnostic) 설계로, Claude 뿐 아니라 **Ollama 등 로컬 LLM 인스턴스를 지원**합니다. 또한 Docker 컨테이너 기반 실행으로 호스트 시스템을 보호하는 보안 아키텍처를 갖추고 있어 폐쇄망/VDI 환경에 적합합니다.

---

## 2. OpenClaw 핵심 특징 (보안 관점)

| 특징 | 설명 | 폐쇄망 적합성 |
|------|------|---------------|
| **Docker 컨테이너 격리** | 모든 실행이 컨테이너 내부에서 발생, 호스트 OS 보호 | ✅ 높음 |
| **모델 불가지론** | Ollama, vLLM 등 내부망 LLM 연동 가능 | ✅ 높음 |
| **오프라인 실행** | 인터넷 연결 없이 로컬에서 실행 가능 | ✅ 높음 |
| **다중 플랫폼** | Windows, Linux, macOS 지원 | ✅ 높음 |
| **오픈소스** | 코드 감사 및 커스터마이징 가능 | ✅ 높음 |

---

## 3. 권장 아키텍처 구성

### 3.1 핵심 구조

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           외부 접속 환경 (인터넷망)                              │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐         │
│  │ 본회의장 PC  │  │ 상임위 PC   │  │ 지역상담소   │  │ 의원 노트북  │         │
│  └──────┬──────┘  └──────┬──────┘  └──────┬──────┘  └──────┬──────┘         │
│         │                │                │                │                │
│         └────────────────┴────────────────┴────────────────┘                │
│                                    │                                         │
│                          ┌─────────▼─────────┐                              │
│                          │   VPN + 2FA/DID    │ ← 모바일 신분증 인증           │
│                          │   (인증 게이트웨이)  │                              │
│                          └─────────┬─────────┘                              │
└────────────────────────────────────┼────────────────────────────────────────┘
                                     │
                          ═══════════╪═══════════  ← 망분리 경계
                                     │
┌────────────────────────────────────┼────────────────────────────────────────┐
│                           DMZ / VDI 영역                                     │
│                          ┌─────────▼─────────┐                              │
│                          │  VDI 게이트웨이    │                              │
│                          │  (Citrix/VMware)  │                              │
│                          └─────────┬─────────┘                              │
│                                    │                                         │
│         ┌──────────────────────────┼──────────────────────────┐             │
│         │                          ▼                          │             │
│         │  ┌─────────────────────────────────────────────┐   │             │
│         │  │           VDI 세션 (가상 PC)                 │   │             │
│         │  │  ┌─────────────────────────────────────┐   │   │             │
│         │  │  │         Docker Container             │   │   │             │
│         │  │  │  ┌─────────────────────────────┐    │   │   │             │
│         │  │  │  │        OpenClaw Agent        │    │   │   │             │
│         │  │  │  │  • 프롬프트 처리              │    │   │   │             │
│         │  │  │  │  • 컨텍스트 관리              │    │   │   │             │
│         │  │  │  │  • 도구 실행 (격리)           │    │   │   │             │
│         │  │  │  └──────────────┬──────────────┘    │   │   │             │
│         │  │  └─────────────────┼────────────────────┘   │   │             │
│         │  └────────────────────┼────────────────────────┘   │             │
│         │                       │                            │             │
│         │              보안 정책 적용                          │             │
│         │    • 클립보드 차단  • 파일 반출 차단                  │             │
│         │    • 화면 캡처 제한  • 세션 로깅                     │             │
│         └───────────────────────┼────────────────────────────┘             │
│                                 │                                           │
└─────────────────────────────────┼───────────────────────────────────────────┘
                                  │
                       ═══════════╪═══════════  ← 내부 방화벽
                                  │
┌─────────────────────────────────┼───────────────────────────────────────────┐
│                          내부망 (핵망)                                       │
│                                 │                                           │
│    ┌────────────────────────────┼────────────────────────────┐              │
│    │                            ▼                            │              │
│    │  ┌──────────────────────────────────────────────────┐  │              │
│    │  │              내부망 LLM 서버                       │  │              │
│    │  │  ┌────────────┐  ┌────────────┐  ┌────────────┐ │  │              │
│    │  │  │   Ollama   │  │   vLLM     │  │ LocalAI    │ │  │              │
│    │  │  │ (Llama3)   │  │ (Mistral)  │  │            │ │  │              │
│    │  │  └────────────┘  └────────────┘  └────────────┘ │  │              │
│    │  └──────────────────────────────────────────────────┘  │              │
│    │                            │                            │              │
│    │                            ▼                            │              │
│    │  ┌──────────────────────────────────────────────────┐  │              │
│    │  │              RAG 시스템                            │  │              │
│    │  │  ┌──────────────┐    ┌──────────────────────┐   │  │              │
│    │  │  │  벡터 DB     │    │    문서 저장소         │   │  │              │
│    │  │  │ (Chroma/    │◄──►│  • 회의록             │   │  │              │
│    │  │  │  Milvus)    │    │  • 조례/규칙          │   │  │              │
│    │  │  └──────────────┘    │  • 의안/청원          │   │  │              │
│    │  │                      │  • 의정자료          │   │  │              │
│    │  │                      └──────────────────────┘   │  │              │
│    │  └──────────────────────────────────────────────────┘  │              │
│    │                                                         │              │
│    │                    AI 의정지원 시스템                     │              │
│    └─────────────────────────────────────────────────────────┘              │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
```

### 3.2 데이터 흐름 (요청 → 응답)

```
┌──────────────────────────────────────────────────────────────────────────────┐
│                        데이터 흐름도 (Request → Response)                      │
└──────────────────────────────────────────────────────────────────────────────┘

① 의원이 질의 입력
   "최근 3개월간 환경 관련 조례안 현황 알려줘"
        │
        ▼
┌───────────────────┐
│  외부 단말기       │  ← 본회의장/상임위/지역상담소/노트북
│  (화면만 수신)     │
└─────────┬─────────┘
          │ VDI 프로토콜 (화면 스트리밍)
          │ ※ 실제 데이터 전송 없음
          ▼
┌───────────────────┐
│  VPN Gateway      │  ← ② 인증: DID + 2FA
│  + 2FA/DID        │     • 모바일 신분증 검증
└─────────┬─────────┘     • OTP 확인
          │
          ▼
┌───────────────────┐
│  VDI Session      │  ← ③ 가상 PC 환경
│  (가상 데스크톱)    │
└─────────┬─────────┘
          │
          ▼
┌───────────────────┐
│  Docker Container │  ← ④ 격리된 실행 환경
│  ┌─────────────┐  │     • 호스트 접근 차단
│  │  OpenClaw   │  │     • 네트워크 제한
│  │  Agent      │  │
│  └──────┬──────┘  │
└─────────┼─────────┘
          │ 내부망 API 호출만 허용
          │ (outbound: LLM API + RAG API only)
          ▼
┌───────────────────┐
│  내부망 LLM       │  ← ⑤ 프롬프트 처리
│  (Ollama/vLLM)    │     • 토큰화
└─────────┬─────────┘     • 추론
          │
          ▼
┌───────────────────┐
│  RAG 시스템       │  ← ⑥ 문서 검색
│  Vector DB +      │     • 임베딩 매칭
│  문서저장소        │     • 관련 문서 추출
└─────────┬─────────┘     • 권한 필터링 (RBAC)
          │
          ▼
┌───────────────────┐
│  LLM 응답 생성    │  ← ⑦ 컨텍스트 + 프롬프트 → 응답
└─────────┬─────────┘
          │
          ▼
   역순으로 화면 전달
   ※ 텍스트/이미지는 화면 픽셀로만 전송
   ※ 원본 데이터 반출 불가

        │
        ▼
┌───────────────────┐
│  의원 화면에 결과  │  "최근 3개월간 환경 관련 조례안은
│  표시             │   총 12건이며, 주요 내용은..."
└───────────────────┘
```

---

## 4. 보안 계층 분석

### 4.1 5계층 보안 아키텍처

```
┌────────────────────────────────────────────────────────────────────────┐
│                          🔒 5계층 보안 아키텍처                          │
├────────────────────────────────────────────────────────────────────────┤
│                                                                        │
│  ┌─────────────────────────────────────────────────────────────────┐  │
│  │  Layer 5: 접근 제어 (Access Control)                             │  │
│  │  ┌──────────────────┬──────────────────┬────────────────────┐  │  │
│  │  │  DID 기반 인증    │    역할별 권한    │    세션 타임아웃    │  │  │
│  │  │  (모바일 신분증)   │    (RBAC/ABAC)   │    (자동 로그아웃)  │  │  │
│  │  └──────────────────┴──────────────────┴────────────────────┘  │  │
│  └─────────────────────────────────────────────────────────────────┘  │
│                                    │                                   │
│  ┌─────────────────────────────────▼───────────────────────────────┐  │
│  │  Layer 4: 네트워크 분리 (Network Isolation)                      │  │
│  │  ┌──────────────────┬──────────────────┬────────────────────┐  │  │
│  │  │    물리적 망분리   │   VDI 프로토콜    │   방화벽 정책      │  │  │
│  │  │  (인터넷↔내부망)   │   (화면만 전송)   │   (화이트리스트)   │  │  │
│  │  └──────────────────┴──────────────────┴────────────────────┘  │  │
│  └─────────────────────────────────────────────────────────────────┘  │
│                                    │                                   │
│  ┌─────────────────────────────────▼───────────────────────────────┐  │
│  │  Layer 3: 실행 격리 (Execution Isolation)                        │  │
│  │  ┌──────────────────┬──────────────────┬────────────────────┐  │  │
│  │  │  Docker 컨테이너  │   리소스 제한     │   syscall 필터링   │  │  │
│  │  │  (호스트 보호)    │   (CPU/메모리)    │   (seccomp)       │  │  │
│  │  └──────────────────┴──────────────────┴────────────────────┘  │  │
│  └─────────────────────────────────────────────────────────────────┘  │
│                                    │                                   │
│  ┌─────────────────────────────────▼───────────────────────────────┐  │
│  │  Layer 2: 데이터 유출 방지 (DLP)                                  │  │
│  │  ┌──────────────────┬──────────────────┬────────────────────┐  │  │
│  │  │   클립보드 차단   │   파일 반출 차단   │   화면 워터마크    │  │  │
│  │  │  (복사/붙여넣기)  │   (USB/네트워크)   │   (추적 가능)     │  │  │
│  │  └──────────────────┴──────────────────┴────────────────────┘  │  │
│  └─────────────────────────────────────────────────────────────────┘  │
│                                    │                                   │
│  ┌─────────────────────────────────▼───────────────────────────────┐  │
│  │  Layer 1: 감사 및 모니터링 (Audit & Monitoring)                   │  │
│  │  ┌──────────────────┬──────────────────┬────────────────────┐  │  │
│  │  │    세션 로깅      │    질의 기록      │    이상 탐지       │  │  │
│  │  │  (모든 행위 기록)  │  (LLM 입출력)    │    (SIEM 연동)    │  │  │
│  │  └──────────────────┴──────────────────┴────────────────────┘  │  │
│  └─────────────────────────────────────────────────────────────────┘  │
│                                                                        │
└────────────────────────────────────────────────────────────────────────┘
```

### 4.2 데이터 보호 원칙

| 원칙 | 구현 방법 | 효과 |
|------|----------|------|
| **데이터 주권** | 모든 데이터가 내부망에 존재 | 외부 유출 원천 차단 |
| **Zero Trust** | 모든 접근마다 인증/인가 검증 | 내부 위협 방어 |
| **최소 권한** | RBAC 기반 문서 접근 제어 | 불필요한 노출 방지 |
| **감사 추적** | 모든 LLM 입출력 로깅 | 사후 추적 가능 |

---

## 5. 기술 스택 제안

### 5.1 내부망 LLM 옵션

| 옵션 | 모델 | GPU 요구사항 | 장점 |
|------|------|-------------|------|
| **Ollama** | Llama 3.1, Mistral | RTX 4090 이상 | 설치 간편, 관리 용이 |
| **vLLM** | 다양한 오픈모델 | A100/H100 | 고성능, 배치 처리 |
| **LocalAI** | GGUF 포맷 지원 | 중간 사양 | 경량, 유연성 |

### 5.2 RAG 구성

```
┌─────────────────────────────────────────────────────────────────┐
│                    RAG 파이프라인 구성                           │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   ┌───────────┐    ┌───────────┐    ┌───────────┐              │
│   │  문서 수집  │───▶│  전처리   │───▶│  임베딩   │              │
│   │           │    │  (청킹)   │    │  생성     │              │
│   └───────────┘    └───────────┘    └─────┬─────┘              │
│        │                                   │                    │
│        ▼                                   ▼                    │
│   ┌───────────┐                     ┌───────────┐              │
│   │  회의록    │                     │  벡터 DB  │              │
│   │  조례/규칙  │                     │ (Chroma/ │              │
│   │  의안/청원  │                     │  Milvus) │              │
│   │  의정자료   │                     └─────┬─────┘              │
│   └───────────┘                           │                    │
│                                           ▼                    │
│                              ┌─────────────────────┐           │
│                              │   검색 + 리랭킹      │           │
│                              │   (Semantic Search) │           │
│                              └──────────┬──────────┘           │
│                                         │                      │
│                                         ▼                      │
│                              ┌─────────────────────┐           │
│                              │   LLM 프롬프트 구성  │           │
│                              │   (Context + Query) │           │
│                              └─────────────────────┘           │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 6. PoC(시범 구축) 제안

### 6.1 단계별 롤아웃

```
Phase 1 (2-4주)          Phase 2 (4-8주)          Phase 3 (8-12주)
┌─────────────┐         ┌─────────────┐         ┌─────────────┐
│  파일럿      │   →     │  확장       │   →     │  전면 도입   │
│  (10명)     │         │  (50명)     │         │  (155명)    │
├─────────────┤         ├─────────────┤         ├─────────────┤
│ • 기본 환경  │         │ • 성능 튜닝  │         │ • 전체 배포  │
│   구축      │         │ • 피드백     │         │ • 교육      │
│ • 핵심 기능  │         │   반영      │         │ • 운영 이관  │
│   검증      │         │ • 보안 감사  │         │             │
└─────────────┘         └─────────────┘         └─────────────┘
```

### 6.2 성공 지표

| 지표 | 목표값 | 측정 방법 |
|------|-------|----------|
| 응답 지연시간 | < 5초 | P95 기준 |
| 동시 접속자 | 50명 이상 | 스트레스 테스트 |
| RAG 정확도 | > 85% | 샘플 질의 평가 |
| 사용자 만족도 | > 4.0/5.0 | 설문 조사 |

---

## 7. 리스크 및 대응 방안

| 리스크 | 영향도 | 대응 방안 |
|--------|-------|----------|
| LLM 환각(hallucination) | 높음 | RAG 출처 표시, 팩트체크 UX |
| 성능 병목 | 중간 | GPU 스케일아웃, 캐싱 |
| 보안 취약점 | 높음 | 정기 침투테스트, 패치 관리 |
| 사용자 저항 | 중간 | 단계적 도입, 교육 강화 |

---

## 8. 결론

**OpenClaw + VDI + 내부망 LLM 아키텍처는 기술적으로 구현 가능하며, 경기도의회의 요구사항에 적합합니다.**

핵심 성공 요인:
1. **망분리 유지**: VDI를 통한 화면 전송만 허용
2. **데이터 주권**: 모든 LLM/RAG가 내부망에 위치
3. **격리 실행**: Docker 컨테이너로 보안 강화
4. **단계적 도입**: PoC → 확장 → 전면 도입

---

## Sources

- [OpenClaw Official](https://openclaw.ai/)
- [OpenClaw GitHub](https://github.com/openclaw/openclaw)
- [What is OpenClaw - DigitalOcean](https://www.digitalocean.com/resources/articles/what-is-openclaw)
- [CNBC - OpenClaw Article](https://www.cnbc.com/2026/02/02/openclaw-open-source-ai-agent-rise-controversy-clawdbot-moltbot-moltbook.html)
