# InfraFlow í”„ë¡œì íŠ¸ ì¢…í•© ê²€í†  ë° ê°œì„  ê³„íš

> **ë‚ ì§œ**: 2026-02-09
> **ë¸Œëœì¹˜**: `feat/llm-diagram-modification`
> **ì½”ë“œë² ì´ìŠ¤**: 284 TS/TSX íŒŒì¼, ~73,170 LOC (Prisma ìƒì„± ì½”ë“œ ì œì™¸)
> **í…ŒìŠ¤íŠ¸**: 65 test suites, 1,975 tests

---

## ëª©ì°¨

1. [í”„ë¡œì íŠ¸ í˜„í™© ìš”ì•½](#1-í”„ë¡œì íŠ¸-í˜„í™©-ìš”ì•½)
2. [ë¹„ê´€ì  ë¶„ì„ (Pessimist Agent)](#2-ë¹„ê´€ì -ë¶„ì„-pessimist-agent)
3. [ë‚™ê´€ì  ë¶„ì„ (Optimist Agent)](#3-ë‚™ê´€ì -ë¶„ì„-optimist-agent)
4. [í”¼ë“œë°± ì¢…í•© ë¶„ì„ (Feedback Analyzer)](#4-í”¼ë“œë°±-ì¢…í•©-ë¶„ì„-feedback-analyzer)
5. [ê°œì„  í•­ëª© ìƒì„¸](#5-ê°œì„ -í•­ëª©-ìƒì„¸)
6. [PR ì‹¤í–‰ ê³„íš (Planner Agent)](#6-pr-ì‹¤í–‰-ê³„íš-planner-agent)
7. [ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸](#7-ê²€ì¦-ì²´í¬ë¦¬ìŠ¤íŠ¸)

---

## 1. í”„ë¡œì íŠ¸ í˜„í™© ìš”ì•½

### ì½”ë“œë² ì´ìŠ¤ ê·œëª¨

| ì˜ì—­ | íŒŒì¼ ìˆ˜ | ë¼ì¸ ìˆ˜ | ë¹„ê³  |
|------|---------|---------|------|
| `src/lib/` | 116 | ~25,000 | ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ í•µì‹¬ |
| `src/components/` | 51 | ~8,600 | React ì»´í¬ë„ŒíŠ¸ |
| `src/hooks/` | 18 | ~3,380 | ì»¤ìŠ¤í…€ í›… |
| `src/app/` | 30 | ~5,000 | Next.js ë¼ìš°íŠ¸/API |
| `src/__tests__/` | 54 | ~18,000 | í…ŒìŠ¤íŠ¸ ì½”ë“œ |
| `src/lib/knowledge/__tests__/` | 15 | ~8,000 | IKG í…ŒìŠ¤íŠ¸ |
| `src/types/` | 5 | ~800 | íƒ€ì… ì •ì˜ |
| `src/contexts/` | 2 | ~600 | React Context |
| **ì´ê³„ (src/)** | **284** | **~73,170** | Prisma ìƒì„± ì½”ë“œ ì œì™¸ |

### ëª¨ë“ˆë³„ ê±´ê°•ë„

| ëª¨ë“ˆ | ê±´ê°•ë„ | í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ | ì£¼ìš” ì´ìŠˆ |
|------|--------|----------------|----------|
| Hook ì•„í‚¤í…ì²˜ | A- | 2/18 í›… í…ŒìŠ¤íŠ¸ë¨ | usePromptParser ê³¼ëŒ€ (419ì¤„) |
| ì»´í¬ë„ŒíŠ¸ | B+ | 5-6ê°œ í…ŒìŠ¤íŠ¸ | ëŒ€í˜• íŒ¨ë„ (480+ì¤„) |
| LLM íŒŒì´í”„ë¼ì¸ | A- | ì–‘í˜¸ | ì¤‘ë³µ ì—”ë“œí¬ì¸íŠ¸, ì…ë ¥ ê²€ì¦ ë¶€ì¬ |
| Knowledge Graph | **C+** | 489 tests | **70% ë¯¸ì‚¬ìš©**, ê³¼ì‰ ì„¤ê³„ |
| API ë¼ìš°íŠ¸ | A | ë¯¸í…ŒìŠ¤íŠ¸ | ì—ëŸ¬ í•¸ë“¤ë§ ì–‘í˜¸ |
| Plugin ì‹œìŠ¤í…œ | B- | ì–‘í˜¸ | updateTrigger ì•ˆí‹°íŒ¨í„´ |
| íƒ€ì… ì•ˆì „ì„± | A | - | íƒ€ì… ê°€ë“œ ì¡´ì¬ |
| ë””ìì¸ ì‹œìŠ¤í…œ | B | - | ê·œì¹™ ì¡´ì¬, ì ìš© ë¯¸í¡ |

---

## 2. ë¹„ê´€ì  ë¶„ì„ (Pessimist Agent)

### ğŸ”´ Critical: í”„ë¡œì íŠ¸ê°€ ì‹¤íŒ¨í•œë‹¤ë©´ ê°€ì¥ í° ì´ìœ 

#### C-1. Knowledge Graph ì£½ì€ ì½”ë“œ (15,380ì¤„, 489 í…ŒìŠ¤íŠ¸)

**ì‹¬ê°ë„**: Critical | **ì˜í–¥**: ìœ ì§€ë³´ìˆ˜ì„±, ë¹Œë“œ ì‹œê°„, ì¸ì§€ ë¶€í•˜

IKG Phase 4-5 ì½”ë“œ(userContributions, trustScorer, conflictDetector, ragSearch, sourceValidator, industryPresets, organizationConfig, graphVisualizer)ê°€ **ì–´ë””ì—ì„œë„ í˜¸ì¶œë˜ì§€ ì•ŠìŒ**.

```
ì‹¤ì œ ì‚¬ìš©ë˜ëŠ” ì½”ë“œ:
â”œâ”€â”€ ANTIPATTERNS â†’ changeRiskAssessor.tsì—ì„œ import
â”œâ”€â”€ RELATIONSHIPS, PATTERNS â†’ graphVisualizer.ts ë‚´ë¶€
â””â”€â”€ ë‚˜ë¨¸ì§€ ì „ë¶€ ë¯¸ì‚¬ìš© âŒ
```

**ë¦¬ìŠ¤í¬**:
- 73,170ì¤„ ì¤‘ ~15,000ì¤„(20%)ì´ ì£½ì€ ì½”ë“œ
- 489ê°œ í…ŒìŠ¤íŠ¸ê°€ ë¯¸ì‚¬ìš© ì½”ë“œë¥¼ í…ŒìŠ¤íŠ¸ â†’ CI ì‹œê°„ ë‚­ë¹„
- ìƒˆ ê°œë°œìê°€ "ì´ ì½”ë“œê°€ ì–´ë””ì„œ ì“°ì´ì§€?" í˜¼ë€
- ë¦¬íŒ©í† ë§ ì‹œ ë¶ˆí•„ìš”í•œ í˜¸í™˜ì„± ê³ ë ¤

#### C-2. PluginContext updateTrigger ì•ˆí‹°íŒ¨í„´

**ì‹¬ê°ë„**: Critical | **íŒŒì¼**: `src/contexts/PluginContext.tsx`

```typescript
// 40+ ê³³ì—ì„œ ë°˜ë³µë˜ëŠ” íŒ¨í„´
const plugins = useMemo(() => {
  void updateTrigger;  // â† ë³€ìˆ˜ë¥¼ ì°¸ì¡°ë§Œ í•´ì„œ re-render íŠ¸ë¦¬ê±°
  return pluginRegistry.getAllPlugins();
}, [updateTrigger]);
```

**ë¦¬ìŠ¤í¬**:
- Reactì˜ ì˜ì¡´ì„± ì¶”ì ì„ ì•…ìš©í•˜ëŠ” íŒ¨í„´
- ëª¨ë“  í”ŒëŸ¬ê·¸ì¸ ë³€ê²½ ì‹œ 40+ useMemoê°€ ë™ì‹œì— ì¬ê³„ì‚°
- ì‹¤ì œ ë³€ê²½ê³¼ ë¬´ê´€í•œ ë¶ˆí•„ìš”í•œ re-render ë°œìƒ
- í–¥í›„ React ë²„ì „ì—ì„œ ë™ì‘ì´ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŒ

#### C-3. íƒ€ì… ì•ˆì „ì„± ìš°íšŒ (`as unknown as`)

**ì‹¬ê°ë„**: High | **íŒŒì¼**: ragSearch.ts, sourceValidator.ts, loader.ts

```typescript
// Double assertion - TypeScript íƒ€ì… ì²´í¬ë¥¼ ì™„ì „íˆ ë¬´ë ¥í™”
const allEntries = [
  ...(RELATIONSHIPS as unknown as KnowledgeEntryBase[]),
  ...(PATTERNS as unknown as KnowledgeEntryBase[]),
  // ...
];
```

**ë¦¬ìŠ¤í¬**:
- ëŸ°íƒ€ì„ì— íƒ€ì… ë¶ˆì¼ì¹˜ë¡œ í¬ë˜ì‹œ ê°€ëŠ¥
- íƒ€ì… ì‹œìŠ¤í…œì˜ ë³´í˜¸ë¥¼ ì˜ë„ì ìœ¼ë¡œ íšŒí”¼
- ë¦¬íŒ©í† ë§ ì‹œ íƒ€ì… ì—ëŸ¬ë¥¼ ê°ì§€í•˜ì§€ ëª»í•¨

---

### ğŸŸ  High: ì„±ëŠ¥ ë³‘ëª©ê³¼ ê¸°ìˆ  ë¶€ì±„

#### H-1. usePromptParser ê°“ í›… (419ì¤„)

5ê°€ì§€ ì±…ì„ì„ í•˜ë‚˜ì˜ í›…ì— ì§‘ì¤‘:
- ë¡œì»¬ íŒŒì‹±, í…œí”Œë¦¿ ì„ íƒ, LLM ìˆ˜ì •, ë ˆì´ìŠ¤ ì»¨ë””ì…˜, ì»¨í…ìŠ¤íŠ¸ ê´€ë¦¬
- í…ŒìŠ¤íŠ¸ ì‘ì„±ì´ ì–´ë ¤ì›€ â†’ ì»¤ë²„ë¦¬ì§€ ê°­

#### H-2. ëŒ€í˜• ì»´í¬ë„ŒíŠ¸ (400+ì¤„)

| ì»´í¬ë„ŒíŠ¸ | ì¤„ ìˆ˜ | ë¬¸ì œ |
|----------|-------|------|
| PluginManager.tsx | 481 | ë‚´ë¶€ì— PluginCard ì¤‘ì²© |
| SecurityAuditPanel.tsx | 465 | 3ê°œ íƒ­ UI í˜¼í•© |
| ComponentForm.tsx | 445 | í¼ + ê²€ì¦ + ì œì¶œ |

#### H-3. API ì…ë ¥ ê²€ì¦ ë¶€ì¬

- `/api/parse`: InfraSpec íƒ€ì… ë¯¸ê²€ì¦
- `/api/modify`: JSON body ë¬´ì œí•œ ìˆ˜ì‹ 
- ìš”ì²­ í¬ê¸° ì œí•œ ì—†ìŒ â†’ DoS ê°€ëŠ¥ì„±

#### H-4. JSON.parse ë¹„ì•ˆì „ ì‚¬ìš©

```typescript
// diffApplier.ts:96
let spec: InfraSpec = JSON.parse(JSON.stringify(currentSpec));
// structuredClone() ì‚¬ìš© ê¶Œì¥
```

- Date ê°ì²´ â†’ ë¬¸ìì—´ ë³€í™˜
- undefined í”„ë¡œí¼í‹° ì†Œì‹¤
- ìˆœí™˜ ì°¸ì¡° ì‹œ í¬ë˜ì‹œ

---

### ğŸŸ¡ Medium: ìœ ì§€ë³´ìˆ˜ ë§ˆì°°

#### M-1. ì¤‘ë³µ íŒŒì‹± ì—”ë“œí¬ì¸íŠ¸
- `/api/parse` vs `/api/modify` â€” ìœ ì‚¬í•œ LLM í˜¸ì¶œ ë¡œì§ ì¤‘ë³µ

#### M-2. í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ë¶ˆê· í˜•
- Knowledge Graph: 489 tests (ë¯¸ì‚¬ìš© ì½”ë“œ)
- Hooks: 2/18 í…ŒìŠ¤íŠ¸ë¨
- Components: 5-6/51 í…ŒìŠ¤íŠ¸ë¨
- App routes: 0 E2E í…ŒìŠ¤íŠ¸

#### M-3. Deprecated ì½”ë“œ ì”ë¥˜
- `animationEngine.ts`: deprecated getAnimationEngine(), resetAnimationEngine()
- `UnifiedParser.ts`: deprecated parsePrompt() ë˜í¼

#### M-4. í•˜ë“œì½”ë”© ìƒ‰ìƒê°’
- PluginManager.tsx: `bg-white`, `border-gray-200` (ë‹¤í¬ëª¨ë“œ ë¯¸ì¤€ìˆ˜)
- FlowCanvas: minimap ì¹´í…Œê³ ë¦¬ ìƒ‰ìƒ í•˜ë“œì½”ë”©

#### M-5. devDependency ë¶ˆí•„ìš” íŒ¨í‚¤ì§€
- `jsdom`: ì„¤ì¹˜ë˜ì—ˆìœ¼ë‚˜ vitestëŠ” `happy-dom` ì‚¬ìš©

#### M-6. ìƒìˆ˜ ë°°ì—´ì´ ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì— ì •ì˜
- SecurityAuditPanel.tsx: WHAT_IF_NODE_TYPES ë°°ì—´ì´ ë Œë”ë§ˆë‹¤ ì¬ìƒì„±
- ComponentPicker.tsx: style ê°ì²´ ì¸ë¼ì¸ ìƒì„±

---

## 3. ë‚™ê´€ì  ë¶„ì„ (Optimist Agent)

### ğŸŸ¢ ê°•ì : ì°¨ë³„í™” í¬ì¸íŠ¸

#### S-1. ê²¬ê³ í•œ ì•„í‚¤í…ì²˜ ê¸°ë°˜

- **í›… í•©ì„± íŒ¨í„´**: useInfraStateê°€ 5ê°œ ì „ë¬¸ í›…ì„ ì¡°í•©í•˜ëŠ” ì„¤ê³„ëŠ” ìš°ìˆ˜
- **ë ˆì´ìŠ¤ ì»¨ë””ì…˜ ë°©ì§€**: requestId + AbortController ì´ì¤‘ ë³´í˜¸
- **í•¨ìˆ˜í˜• ì—…ë°ì´í„°**: `setEdges(prev => ...)` íŒ¨í„´ìœ¼ë¡œ stale closure ë°©ì§€
- **SSoT íŒ¨í„´**: infrastructureDBê°€ ë…¸ë“œ ë©”íƒ€ë°ì´í„°ì˜ ë‹¨ì¼ ì§„ì‹¤ ì†ŒìŠ¤

#### S-2. í¬ê´„ì ì¸ Knowledge Graph ì„¤ê³„

ì£½ì€ ì½”ë“œì´ì§€ë§Œ ì„¤ê³„ ìì²´ëŠ” ë›°ì–´ë‚¨:
- 49ê°œ ê´€ê³„, 18ê°œ íŒ¨í„´, 22ê°œ ì•ˆí‹°íŒ¨í„´, 35ê°œ ì¥ì•  ì‹œë‚˜ë¦¬ì˜¤
- ì‹ ë¢° ì ìˆ˜ ì‹œìŠ¤í…œ, ì¶©ëŒ ê°ì§€, RAG ê²€ìƒ‰
- **í™œì„±í™”ë§Œ í•˜ë©´** LLM ì‘ë‹µ í’ˆì§ˆì„ í¬ê²Œ í–¥ìƒ ê°€ëŠ¥

#### S-3. íƒ€ì… ì‹œìŠ¤í…œ í™œìš©ë„ ë†’ìŒ

- Strict mode + discriminated unions
- ëŸ°íƒ€ì„ ê°€ë“œ í•¨ìˆ˜ (isInfraSpec, isInfraNodeData)
- Zod í†µí•©ìœ¼ë¡œ API ì‘ë‹µ ê²€ì¦

#### S-4. í…ŒìŠ¤íŠ¸ ì¸í”„ë¼ í™•ë¦½

- 1,975ê°œ í…ŒìŠ¤íŠ¸ â†’ íšŒê·€ ë°©ì§€ ê¸°ë°˜ í™•ë³´
- vitest + happy-dom ê²½ëŸ‰ í™˜ê²½
- ì»¤ë²„ë¦¬ì§€ ì„ê³„ê°’ ì„¤ì • (60% statements)

#### S-5. í”ŒëŸ¬ê·¸ì¸ ì‹œìŠ¤í…œ í™•ì¥ì„±

- ë…¸ë“œ, íŒŒì„œ, ë‚´ë³´ë‚´ê¸°, íŒ¨ë„, í…Œë§ˆ í™•ì¥ í¬ì¸íŠ¸
- Registry + Event Listener íŒ¨í„´
- ì½”ì–´ í”ŒëŸ¬ê·¸ì¸ìœ¼ë¡œ ê¸°ë³¸ ê¸°ëŠ¥ ì œê³µ

#### S-6. ì¸ì¦ ì‹œìŠ¤í…œ ì™„ë¹„

- NextAuth.js v5 (JWT, Credentials + OAuth)
- ë¯¸ë“¤ì›¨ì–´ ê¸°ë°˜ ë¼ìš°íŠ¸ ë³´í˜¸
- Prisma ìŠ¤í‚¤ë§ˆë¡œ ì‚¬ìš©ì/ë‹¤ì´ì–´ê·¸ë¨ ê´€ê³„ ëª¨ë¸ë§

---

### ğŸ”µ í™•ì¥ ê°€ëŠ¥ì„±

| ì˜ì—­ | ê¸°íšŒ | ê·¼ê±° |
|------|------|------|
| IKG í™œì„±í™” | LLM í”„ë¡¬í”„íŠ¸ì— knowledge ì£¼ì… | enrichContext() ì´ë¯¸ êµ¬í˜„ë¨ |
| ì‹¤ì‹œê°„ í˜‘ì—… | ë‹¤ì´ì–´ê·¸ë¨ ê³µë™ í¸ì§‘ | Auth + Prisma ê¸°ë°˜ í™•ë³´ |
| í…œí”Œë¦¿ ë§ˆì¼“ | ì‚¬ìš©ì í…œí”Œë¦¿ ê³µìœ  | Plugin ì‹œìŠ¤í…œ + ê¸°ì—¬ ì‹œìŠ¤í…œ |
| ê°ì‚¬ ë³´ê³ ì„œ | ë³´ì•ˆ ê°ì‚¬ ìë™í™” | SecurityAudit + ComplianceChecker |
| CI/CD í†µí•© | IaC ê²€ì¦ íŒŒì´í”„ë¼ì¸ | Terraform/K8s ë‚´ë³´ë‚´ê¸° ì¡´ì¬ |

---

## 4. í”¼ë“œë°± ì¢…í•© ë¶„ì„ (Feedback Analyzer)

### ìš°ì„ ìˆœìœ„ ë§¤íŠ¸ë¦­ìŠ¤

```
ì˜í–¥ë ¥ â†‘
  â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  â”‚ C-1     â”‚       â”‚ S-2     â”‚
  â”‚  â”‚ IKG     â”‚       â”‚ IKG     â”‚
  â”‚  â”‚ ì£½ì€ì½”ë“œ â”‚       â”‚ í™œì„±í™”  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  â”‚ C-2     â”‚  â”‚ H-3     â”‚
  â”‚  â”‚Plugin   â”‚  â”‚ API     â”‚
  â”‚  â”‚Context  â”‚  â”‚ ê²€ì¦    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  â”‚ H-1     â”‚  â”‚ M-2     â”‚
  â”‚  â”‚ God Hookâ”‚  â”‚ í…ŒìŠ¤íŠ¸  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ ì»¤ë²„ë¦¬ì§€â”‚
  â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ êµ¬í˜„ ë‚œì´ë„
      ë‚®ìŒ          ì¤‘ê°„          ë†’ìŒ
```

### ì˜ì¡´ì„± ë§µ

```
[C-1 IKG ì •ë¦¬] â”€â”€â–¶ [M-2 í…ŒìŠ¤íŠ¸ ì¬ë°°ë¶„] â”€â”€â–¶ [S-2 IKG í™œì„±í™”]
                                                    â”‚
[C-2 Plugin ìˆ˜ì •] â”€â”€â–¶ [H-2 ì»´í¬ë„ŒíŠ¸ ë¶„ë¦¬]          â”‚
                                                    â”‚
[H-3 API ê²€ì¦] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
                                                    â–¼
[C-3 íƒ€ì… ì•ˆì „] â”€â”€â–¶ [H-4 JSON ì•ˆì „]      [í–¥í›„: LLM í’ˆì§ˆ í–¥ìƒ]
```

---

## 5. ê°œì„  í•­ëª© ìƒì„¸

### ì´ 20ê°œ ì´ìŠˆ â†’ 10ê°œ PRë¡œ êµ¬ì„±

| ID | ì´ìŠˆ | ì‹¬ê°ë„ | ë‚œì´ë„ | ì˜ˆìƒ ë³€ê²½ |
|----|------|--------|--------|----------|
| P-01 | IKG Phase 4-5 ë¯¸ì‚¬ìš© ì½”ë“œ ì•„ì¹´ì´ë¸Œ | Critical | ì¤‘ | ~8,000ì¤„ ì‚­ì œ, 300+ í…ŒìŠ¤íŠ¸ ì‚­ì œ |
| P-02 | PluginContext updateTrigger ì•ˆí‹°íŒ¨í„´ ìˆ˜ì • | Critical | ì¤‘ | PluginContext.tsx ì¬ì‘ì„± |
| P-03 | `as unknown as` íƒ€ì… ë‹¨ì–¸ ì œê±° | High | ë‚® | 3-4 íŒŒì¼ ìˆ˜ì • |
| P-04 | usePromptParser í›… ë¶„ë¦¬ | High | ì¤‘ | 1â†’3 íŒŒì¼ ë¶„ë¦¬ |
| P-05 | ëŒ€í˜• ì»´í¬ë„ŒíŠ¸ ë¶„í•  | High | ì¤‘ | 3 íŒŒì¼ ë¶„í•  |
| P-06 | API ë¼ìš°íŠ¸ ì…ë ¥ ê²€ì¦ (Zod) | High | ë‚® | 2-3 API ë¼ìš°íŠ¸ |
| P-07 | JSON.parse â†’ structuredClone | Medium | ë‚® | 3-4 íŒŒì¼ ìˆ˜ì • |
| P-08 | Deprecated ì½”ë“œ ì‚­ì œ | Medium | ë‚® | 2 íŒŒì¼ ì •ë¦¬ |
| P-09 | í•˜ë“œì½”ë”© ìƒ‰ìƒ â†’ ë””ìì¸ í† í° | Medium | ë‚® | 3-4 ì»´í¬ë„ŒíŠ¸ |
| P-10 | devDependency ì •ë¦¬ + ì„¤ì • ìµœì í™” | Low | ë‚® | package.json, vitest.config |

---

## 6. PR ì‹¤í–‰ ê³„íš (Planner Agent)

### ë³‘ë ¬ ìŠ¤íŠ¸ë¦¼ êµ¬ì„±

```
ì‹œê°„ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶

Stream A: ì½”ë“œ ì •ë¦¬ (ë…ë¦½ì )              Stream B: ì•„í‚¤í…ì²˜ ê°œì„ 
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                     â”‚  â”‚                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ PR A-1   â”‚  â”‚ PR A-2   â”‚        â”‚  â”‚  â”‚ PR B-1   â”‚             â”‚
â”‚  â”‚ IKG ì •ë¦¬ â”‚  â”‚Deprecatedâ”‚        â”‚  â”‚  â”‚ Plugin   â”‚             â”‚
â”‚  â”‚ P-01     â”‚  â”‚ P-08     â”‚        â”‚  â”‚  â”‚ Context  â”‚             â”‚
â”‚  â”‚          â”‚  â”‚          â”‚        â”‚  â”‚  â”‚ P-02     â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚  â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜             â”‚
â”‚        â”‚                            â”‚  â”‚        â”‚                  â”‚
â”‚        â–¼                            â”‚  â”‚        â–¼                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ PR A-3   â”‚  â”‚ PR A-4   â”‚        â”‚  â”‚  â”‚ PR B-2   â”‚  â”‚ PR B-3 â”‚â”‚
â”‚  â”‚ íƒ€ì…ì•ˆì „ â”‚  â”‚ ì„¤ì •ì •ë¦¬ â”‚        â”‚  â”‚  â”‚ Hook     â”‚  â”‚ì»´í¬ë„ŒíŠ¸â”‚â”‚
â”‚  â”‚ P-03,P-07â”‚  â”‚ P-10     â”‚        â”‚  â”‚  â”‚ ë¶„ë¦¬     â”‚  â”‚ ë¶„í•    â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚  â”‚  â”‚ P-04     â”‚  â”‚ P-05   â”‚â”‚
â”‚                                     â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  Stream C: API/UI ê°œì„               â”‚  â”‚                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚  â”‚                            â”‚
â”‚  â”‚ PR C-1   â”‚  â”‚ PR C-2   â”‚        â”‚  â”‚                            â”‚
â”‚  â”‚ API ê²€ì¦ â”‚  â”‚ ë””ìì¸   â”‚        â”‚  â”‚                            â”‚
â”‚  â”‚ P-06     â”‚  â”‚ í† í°     â”‚        â”‚  â”‚                            â”‚
â”‚  â”‚          â”‚  â”‚ P-09     â”‚        â”‚  â”‚                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚  â”‚                            â”‚
â”‚                                     â”‚  â”‚                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ì˜ì¡´ì„±:
  A-1 â”€â”€â–¶ A-3 (IKG ì •ë¦¬ í›„ íƒ€ì… ë‹¨ì–¸ ì œê±°)
  B-1 â”€â”€â–¶ B-2 (PluginContext ìˆ˜ì • í›„ Hook ë¶„ë¦¬)
  ë‚˜ë¨¸ì§€ëŠ” ëª¨ë‘ ë…ë¦½ì ìœ¼ë¡œ ë³‘ë ¬ ì‹¤í–‰ ê°€ëŠ¥
```

---

### PR A-1: IKG Phase 4-5 ë¯¸ì‚¬ìš© ì½”ë“œ ì•„ì¹´ì´ë¸Œ

**ì´ìŠˆ**: P-01 (Critical)
**ëª©í‘œ**: ë¯¸ì‚¬ìš© Knowledge Graph ì½”ë“œë¥¼ ì‚­ì œí•˜ì—¬ ì½”ë“œë² ì´ìŠ¤ ê²½ëŸ‰í™”

**ë³€ê²½ íŒŒì¼**:
```
ì‚­ì œ:
â”œâ”€â”€ src/lib/knowledge/ragSearch.ts              (717ì¤„)
â”œâ”€â”€ src/lib/knowledge/sourceValidator.ts        (íŒŒì¼ ì „ì²´)
â”œâ”€â”€ src/lib/knowledge/industryPresets.ts        (950ì¤„)
â”œâ”€â”€ src/lib/knowledge/organizationConfig.ts     (685ì¤„)
â”œâ”€â”€ src/lib/knowledge/userContributions.ts      (íŒŒì¼ ì „ì²´)
â”œâ”€â”€ src/lib/knowledge/trustScorer.ts            (íŒŒì¼ ì „ì²´)
â”œâ”€â”€ src/lib/knowledge/conflictDetector.ts       (íŒŒì¼ ì „ì²´)
â”œâ”€â”€ src/lib/knowledge/graphVisualizer.ts        (892ì¤„) *
â”œâ”€â”€ src/__tests__/lib/knowledge/ragSearch.test.ts
â”œâ”€â”€ src/__tests__/lib/knowledge/sourceValidator.test.ts
â”œâ”€â”€ src/__tests__/lib/knowledge/industryPresets.test.ts
â”œâ”€â”€ src/__tests__/lib/knowledge/organizationConfig.test.ts
â”œâ”€â”€ src/__tests__/lib/knowledge/userContributions.test.ts
â”œâ”€â”€ src/__tests__/lib/knowledge/trustScorer.test.ts
â”œâ”€â”€ src/__tests__/lib/knowledge/conflictDetector.test.ts
â””â”€â”€ src/__tests__/lib/knowledge/graphVisualizer.test.ts

ìˆ˜ì •:
â”œâ”€â”€ src/lib/knowledge/index.ts         (ë¯¸ì‚¬ìš© export ì œê±°)
â”œâ”€â”€ src/lib/knowledge/types.ts         (ë¯¸ì‚¬ìš© íƒ€ì… ì œê±°)
â””â”€â”€ src/lib/knowledge/contextEnricher.ts (ë¯¸ì‚¬ìš© import ì •ë¦¬)
```

*graphVisualizer.tsëŠ” RELATIONSHIPS/PATTERNSë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ ìœ ì§€ ì—¬ë¶€ ê²°ì • í•„ìš”. ë‹¨, ì´ë¥¼ ë³´ì—¬ì£¼ëŠ” UIê°€ ì—†ìœ¼ë¯€ë¡œ ì‚­ì œ ê¶Œì¥.

**ê²€ì¦**:
- `npx vitest run` â€” ì‚­ì œëœ í…ŒìŠ¤íŠ¸ ì œì™¸ í›„ ì „ì²´ í†µê³¼
- `npx tsc --noEmit` â€” íƒ€ì… ì—ëŸ¬ ì—†ìŒ
- ë‚¨ì€ ì†ŒìŠ¤ì—ì„œ ì‚­ì œëœ ëª¨ë“ˆ import ì—†ìŒ í™•ì¸

**ì˜ˆìƒ íš¨ê³¼**: ~8,000ì¤„ ì†ŒìŠ¤ + ~5,000ì¤„ í…ŒìŠ¤íŠ¸ ì‚­ì œ â†’ ~300+ í…ŒìŠ¤íŠ¸ ê°ì†Œ

---

### PR A-2: Deprecated ì½”ë“œ ì‚­ì œ

**ì´ìŠˆ**: P-08 (Medium)
**ëª©í‘œ**: deprecatedë¡œ í‘œì‹œëœ ë ˆê±°ì‹œ ë˜í¼ í•¨ìˆ˜ ì œê±°

**ë³€ê²½ íŒŒì¼**:
```
ìˆ˜ì •:
â”œâ”€â”€ src/lib/animation/animationEngine.ts
â”‚   â””â”€â”€ ì‚­ì œ: getAnimationEngine(), resetAnimationEngine() (lines 288-314)
â”œâ”€â”€ src/lib/parser/UnifiedParser.ts
â”‚   â””â”€â”€ ì‚­ì œ: deprecated parsePrompt() ë˜í¼ (lines 190-200)
â”‚   â””â”€â”€ ê²€í† : smartParse() ë˜í¼ ìœ ì§€ ì—¬ë¶€
â””â”€â”€ ê´€ë ¨ import ì •ë¦¬
```

**ì‚¬ì „ í™•ì¸**: ì‚­ì œ ì „ grepìœ¼ë¡œ ì‚¬ìš©ì²˜ í™•ì¸ í•„ìˆ˜

**ê²€ì¦**:
- `npx vitest run` ì „ì²´ í†µê³¼
- `npx tsc --noEmit` íƒ€ì… ì—ëŸ¬ ì—†ìŒ

---

### PR A-3: íƒ€ì… ì•ˆì „ì„± ê°œì„ 

**ì´ìŠˆ**: P-03, P-07 (High + Medium)
**ëª©í‘œ**: `as unknown as` ì œê±° + JSON.parse ì•ˆì „í™”

**ë³€ê²½ íŒŒì¼**:
```
ìˆ˜ì •:
â”œâ”€â”€ src/lib/knowledge/ragSearch.ts     (íƒ€ì… ë‹¨ì–¸ â†’ ìœ ë‹ˆì˜¨ íƒ€ì…)
â”œâ”€â”€ src/lib/knowledge/sourceValidator.ts (íƒ€ì… ë‹¨ì–¸ â†’ ìœ ë‹ˆì˜¨ íƒ€ì…)
â”œâ”€â”€ src/lib/plugins/loader.ts          (ëŸ°íƒ€ì„ ê²€ì¦ ì¶”ê°€)
â”œâ”€â”€ src/lib/parser/diffApplier.ts      (JSON.parse â†’ structuredClone)
â”œâ”€â”€ src/lib/parser/intelligentParser.ts (JSON.parse â†’ structuredClone)
â””â”€â”€ src/lib/knowledge/types.ts         (KnowledgeEntryBase ìœ ë‹ˆì˜¨ ì¶”ê°€)
```

*ì£¼ì˜: PR A-1 ì´í›„ì— ì‹¤í–‰. A-1ì—ì„œ ragSearch/sourceValidatorê°€ ì‚­ì œë˜ë©´ í•´ë‹¹ ìˆ˜ì • ë¶ˆí•„ìš”.

**êµ¬í˜„ ì˜ˆì‹œ**:
```typescript
// Before (unsafe)
const allEntries = [
  ...(RELATIONSHIPS as unknown as KnowledgeEntryBase[]),
];

// After (safe)
type AnyKnowledgeEntry = Relationship | Pattern | Antipattern | Failure | PerformanceProfile;

function toBaseEntries(entries: AnyKnowledgeEntry[]): KnowledgeEntryBase[] {
  return entries.map(e => ({
    id: e.id,
    name: e.name,
    description: e.description,
    tags: e.tags ?? [],
    sources: e.sources ?? [],
  }));
}
```

**ê²€ì¦**:
- `npx tsc --noEmit` â€” íƒ€ì… ì—ëŸ¬ ì—†ìŒ
- `npx vitest run` â€” ì „ì²´ í†µê³¼

---

### PR A-4: devDependency ì •ë¦¬ + ì„¤ì • ìµœì í™”

**ì´ìŠˆ**: P-10 (Low)
**ëª©í‘œ**: ë¶ˆí•„ìš”í•œ íŒ¨í‚¤ì§€ ì œê±°, í…ŒìŠ¤íŠ¸ ì„¤ì • ìµœì í™”

**ë³€ê²½ íŒŒì¼**:
```
ìˆ˜ì •:
â”œâ”€â”€ package.json
â”‚   â””â”€â”€ ì‚­ì œ: jsdom (happy-dom ì‚¬ìš© ì¤‘ì´ë¯€ë¡œ ë¶ˆí•„ìš”)
â”œâ”€â”€ vitest.config.ts
â”‚   â””â”€â”€ ê²€í† : fileParallelism í™œì„±í™” ê°€ëŠ¥ ì—¬ë¶€
â”œâ”€â”€ src/app/globals.css
â”‚   â””â”€â”€ ë¯¸ì‚¬ìš© --font-geist-* ë³€ìˆ˜ ì •ë¦¬
â””â”€â”€ npm install (lock íŒŒì¼ ê°±ì‹ )
```

**ê²€ì¦**:
- `npm install` ì„±ê³µ
- `npx vitest run` ì „ì²´ í†µê³¼
- `npx tsc --noEmit` ì—ëŸ¬ ì—†ìŒ

---

### PR B-1: PluginContext updateTrigger ì•ˆí‹°íŒ¨í„´ ìˆ˜ì •

**ì´ìŠˆ**: P-02 (Critical)
**ëª©í‘œ**: updateTrigger íŒ¨í„´ì„ ì´ë²¤íŠ¸ ê¸°ë°˜ êµ¬ë…ìœ¼ë¡œ êµì²´

**ë³€ê²½ íŒŒì¼**:
```
ìˆ˜ì •:
â”œâ”€â”€ src/contexts/PluginContext.tsx  (ì£¼ìš” ì¬ì‘ì„±)
â”‚   â””â”€â”€ updateTrigger íŒ¨í„´ â†’ useSyncExternalStore ë˜ëŠ” ì´ë²¤íŠ¸ êµ¬ë…
â”‚   â””â”€â”€ 40+ void updateTrigger; êµ¬ë¬¸ ì œê±°
â”‚   â””â”€â”€ useMemo ì˜ì¡´ì„± ì •ë¦¬
â””â”€â”€ src/hooks/usePlugins.ts (í•„ìš”ì‹œ ìˆ˜ì •)
```

**êµ¬í˜„ ë°©í–¥**:
```typescript
// Before (anti-pattern)
const [updateTrigger, setUpdateTrigger] = useState(0);
// 40+ places: void updateTrigger;

// After (event-driven)
const [, forceUpdate] = useReducer(x => x + 1, 0);

useEffect(() => {
  const unsubscribe = pluginRegistry.onUpdate(forceUpdate);
  return unsubscribe;
}, []);

// ë˜ëŠ” React 18+ useSyncExternalStore í™œìš©
const plugins = useSyncExternalStore(
  pluginRegistry.subscribe,
  pluginRegistry.getSnapshot
);
```

**ê²€ì¦**:
- PluginContext ê´€ë ¨ í…ŒìŠ¤íŠ¸ í†µê³¼
- `npx vitest run` ì „ì²´ í†µê³¼
- í”ŒëŸ¬ê·¸ì¸ ë“±ë¡/í•´ì œ ì‹œ UI ì •ìƒ ë°˜ì˜ í™•ì¸

---

### PR B-2: usePromptParser í›… ë¶„ë¦¬

**ì´ìŠˆ**: P-04 (High)
**ëª©í‘œ**: 419ì¤„ ê°“ í›…ì„ 2-3ê°œ ì „ë¬¸ í›…ìœ¼ë¡œ ë¶„ë¦¬

**ë³€ê²½ íŒŒì¼**:
```
ì‹ ê·œ:
â”œâ”€â”€ src/hooks/useLocalParser.ts      (ë¡œì»¬ íŒŒì‹± + í…œí”Œë¦¿ ë§¤ì¹­)
â”œâ”€â”€ src/hooks/useLLMModifier.ts      (LLM ê¸°ë°˜ ë‹¤ì´ì–´ê·¸ë¨ ìˆ˜ì •)
â””â”€â”€ src/hooks/useParserContext.ts     (ëŒ€í™” ì»¨í…ìŠ¤íŠ¸ ê´€ë¦¬)

ìˆ˜ì •:
â”œâ”€â”€ src/hooks/usePromptParser.ts     (â†’ 3ê°œ í›…ì„ í•©ì„±í•˜ëŠ” ì–‡ì€ ë ˆì´ì–´)
â”œâ”€â”€ src/hooks/useInfraState.ts       (import ê²½ë¡œ ì¡°ì •)
â””â”€â”€ src/hooks/index.ts               (ì‹ ê·œ í›… export)
```

**ë¶„ë¦¬ ê¸°ì¤€**:
- `useLocalParser`: parsePromptLocal, handleTemplateSelection
- `useLLMModifier`: handleLLMModify, AbortController ê´€ë¦¬, ë ˆì´ìŠ¤ ì»¨ë””ì…˜
- `useParserContext`: ConversationContext ìƒì„±/ì—…ë°ì´íŠ¸

**ê²€ì¦**:
- ê¸°ì¡´ usePromptParser í…ŒìŠ¤íŠ¸ í†µê³¼
- useInfraState ë™ì‘ ë³€ê²½ ì—†ìŒ
- `npx vitest run` ì „ì²´ í†µê³¼

---

### PR B-3: ëŒ€í˜• ì»´í¬ë„ŒíŠ¸ ë¶„í• 

**ì´ìŠˆ**: P-05 (High)
**ëª©í‘œ**: 400+ì¤„ ì»´í¬ë„ŒíŠ¸ë¥¼ ë” ì‘ì€ ë‹¨ìœ„ë¡œ ë¶„í• 

**ë³€ê²½ íŒŒì¼**:
```
ì‹ ê·œ:
â”œâ”€â”€ src/components/admin/PluginCard.tsx        (PluginManagerì—ì„œ ì¶”ì¶œ)
â”œâ”€â”€ src/components/panels/SecurityAuditFilter.tsx  (í•„í„° UI ì¶”ì¶œ)
â”œâ”€â”€ src/components/panels/SecurityAuditResults.tsx (ê²°ê³¼ UI ì¶”ì¶œ)
â””â”€â”€ src/components/panels/WhatIfSimulator.tsx      (What-If íƒ­ ì¶”ì¶œ)

ìˆ˜ì •:
â”œâ”€â”€ src/components/admin/PluginManager.tsx      (â†’ 250ì¤„ ì´í•˜)
â”œâ”€â”€ src/components/panels/SecurityAuditPanel.tsx (â†’ 200ì¤„ ì´í•˜)
â””â”€â”€ ê´€ë ¨ ìƒìˆ˜ë¥¼ ì»´í¬ë„ŒíŠ¸ ë°–ìœ¼ë¡œ ì´ë™
    â””â”€â”€ WHAT_IF_NODE_TYPES ë“± â†’ íŒŒì¼ ìƒë‹¨ ë˜ëŠ” ë³„ë„ constants
```

**ê²€ì¦**:
- ê¸°ì¡´ ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸ í†µê³¼ (ìˆëŠ” ê²½ìš°)
- UI ë Œë”ë§ ë™ì¼í•˜ê²Œ ìœ ì§€
- `npx tsc --noEmit` ì—ëŸ¬ ì—†ìŒ

---

### PR C-1: API ë¼ìš°íŠ¸ ì…ë ¥ ê²€ì¦ (Zod)

**ì´ìŠˆ**: P-06 (High)
**ëª©í‘œ**: ëª¨ë“  API ë¼ìš°íŠ¸ì— Zod ìŠ¤í‚¤ë§ˆ ê¸°ë°˜ ì…ë ¥ ê²€ì¦ ì¶”ê°€

**ë³€ê²½ íŒŒì¼**:
```
ì‹ ê·œ:
â”œâ”€â”€ src/lib/validations/api.ts        (API ìš”ì²­ ìŠ¤í‚¤ë§ˆ)
â”‚   â”œâ”€â”€ ParseRequestSchema
â”‚   â”œâ”€â”€ ModifyRequestSchema
â”‚   â””â”€â”€ LLMRequestSchema

ìˆ˜ì •:
â”œâ”€â”€ src/app/api/parse/route.ts        (ìš”ì²­ body ê²€ì¦ ì¶”ê°€)
â”œâ”€â”€ src/app/api/modify/route.ts       (ìš”ì²­ body ê²€ì¦ ì¶”ê°€)
â”œâ”€â”€ src/app/api/llm/route.ts          (ìš”ì²­ body ê²€ì¦ ì¶”ê°€)
â””â”€â”€ src/app/api/diagrams/route.ts     (ìš”ì²­ body ê²€ì¦ ì¶”ê°€)
```

**êµ¬í˜„ ì˜ˆì‹œ**:
```typescript
// src/lib/validations/api.ts
import { z } from 'zod';

export const ModifyRequestSchema = z.object({
  prompt: z.string().min(1).max(5000),
  currentSpec: z.object({
    nodes: z.array(z.unknown()),
    connections: z.array(z.unknown()),
  }),
  conversationContext: z.unknown().optional(),
});

// route.ts
const body = await request.json();
const result = ModifyRequestSchema.safeParse(body);
if (!result.success) {
  return NextResponse.json({ error: 'Invalid request', details: result.error.issues }, { status: 400 });
}
```

**ê²€ì¦**:
- API ì—”ë“œí¬ì¸íŠ¸ ìˆ˜ë™ í…ŒìŠ¤íŠ¸
- `npx vitest run` ì „ì²´ í†µê³¼
- ì˜ëª»ëœ ìš”ì²­ ì‹œ 400 ì‘ë‹µ í™•ì¸

---

### PR C-2: í•˜ë“œì½”ë”© ìƒ‰ìƒ â†’ ë””ìì¸ í† í°

**ì´ìŠˆ**: P-09 (Medium)
**ëª©í‘œ**: DS-001 ê·œì¹™ì— ë§ê²Œ í•˜ë“œì½”ë”© ìƒ‰ìƒì„ ë””ìì¸ í† í°ìœ¼ë¡œ êµì²´

**ë³€ê²½ íŒŒì¼**:
```
ìˆ˜ì •:
â”œâ”€â”€ src/components/admin/PluginManager.tsx
â”‚   â””â”€â”€ bg-white â†’ bg-infra-bg-secondary (ë‹¤í¬ëª¨ë“œ í˜¸í™˜)
â”‚   â””â”€â”€ border-gray-200 â†’ border-infra-border
â”œâ”€â”€ src/components/shared/FlowCanvas.tsx
â”‚   â””â”€â”€ minimap ì¹´í…Œê³ ë¦¬ ìƒ‰ìƒ â†’ ë””ìì¸ í† í°
â”œâ”€â”€ src/components/contextMenu/ComponentPicker.tsx
â”‚   â””â”€â”€ style ì¸ë¼ì¸ â†’ useMemo
â””â”€â”€ src/components/panels/SecurityAuditPanel.tsx
    â””â”€â”€ ìƒìˆ˜ ë°°ì—´ ì»´í¬ë„ŒíŠ¸ ë°–ìœ¼ë¡œ ì´ë™
```

**ê²€ì¦**:
- UI ë Œë”ë§ í™•ì¸ (ë‹¤í¬ëª¨ë“œì—ì„œ ì •ìƒ í‘œì‹œ)
- `npx tsc --noEmit` ì—ëŸ¬ ì—†ìŒ

---

## 7. ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸

### PR ë¨¸ì§€ ì „ í•„ìˆ˜ í™•ì¸

```
ëª¨ë“  PR ê³µí†µ:
â–¡ npx tsc --noEmit  â†’ íƒ€ì… ì—ëŸ¬ 0
â–¡ npx vitest run    â†’ ì „ì²´ í…ŒìŠ¤íŠ¸ í†µê³¼
â–¡ git diff í™•ì¸     â†’ ì˜ë„í•˜ì§€ ì•Šì€ ë³€ê²½ ì—†ìŒ
â–¡ import ì •ë¦¬       â†’ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” import ì—†ìŒ

PR A-1 (IKG ì •ë¦¬) ì¶”ê°€:
â–¡ ì‚­ì œ íŒŒì¼ grep í™•ì¸ â†’ ë‹¤ë¥¸ ì†ŒìŠ¤ì—ì„œ import ì—†ìŒ
â–¡ index.ts export ì •ë¦¬ â†’ ì‚­ì œ ëª¨ë“ˆ re-export ì—†ìŒ
â–¡ docs ì—…ë°ì´íŠ¸       â†’ IKG ì„¤ê³„ ë¬¸ì„œì— ì•„ì¹´ì´ë¸Œ ê¸°ë¡

PR B-1 (PluginContext) ì¶”ê°€:
â–¡ í”ŒëŸ¬ê·¸ì¸ ë“±ë¡/í•´ì œ UI ë™ì‘ í™•ì¸
â–¡ í”ŒëŸ¬ê·¸ì¸ ìƒíƒœ ë³€ê²½ ì‹œ ì‹¤ì‹œê°„ ë°˜ì˜
â–¡ re-render íšŸìˆ˜ ì¸¡ì • (React DevTools)

PR B-2 (Hook ë¶„ë¦¬) ì¶”ê°€:
â–¡ useInfraState API ë³€ê²½ ì—†ìŒ
â–¡ í”„ë¡¬í”„íŠ¸ íŒŒì‹± â†’ ë‹¤ì´ì–´ê·¸ë¨ ìƒì„± í”Œë¡œìš° ì •ìƒ
â–¡ LLM ìˆ˜ì • â†’ ë‹¤ì´ì–´ê·¸ë¨ ì—…ë°ì´íŠ¸ í”Œë¡œìš° ì •ìƒ
```

---

## ë¶€ë¡: ë³‘ë ¬ ì‹¤í–‰ ê°€ì´ë“œ

### ë™ì‹œ ì‘ì—… ê°€ëŠ¥í•œ ì¡°í•©

| ì¡°í•© | PRë“¤ | ì´ìœ  |
|------|------|------|
| ì¡°í•© 1 | A-1 + B-1 + C-1 | ì™„ì „íˆ ë‹¤ë¥¸ íŒŒì¼ ì˜ì—­ |
| ì¡°í•© 2 | A-2 + C-2 | ë…ë¦½ì ì¸ ì •ë¦¬ ì‘ì—… |
| ì¡°í•© 3 | A-3 + B-2 | A-1 ì™„ë£Œ í›„, ì„œë¡œ ë…ë¦½ |
| ì¡°í•© 4 | A-4 + B-3 | ë…ë¦½ì ì¸ ê²½ëŸ‰ ì‘ì—… |

### ìˆœì„œ ì˜ì¡´ì„±

```
í•„ìˆ˜ ìˆœì„œ:
  A-1 â”€â”€â–¶ A-3  (IKG ì‚­ì œ í›„ ë‚¨ì€ íŒŒì¼ì˜ íƒ€ì… ìˆ˜ì •)
  B-1 â”€â”€â–¶ B-2  (PluginContext ì •ë¦¬ í›„ Hook ë¦¬íŒ©í† ë§)

ê¶Œì¥ ìˆœì„œ (ì¶©ëŒ ìµœì†Œí™”):
  Phase 1: A-1 âˆ¥ B-1 âˆ¥ C-1        (3ê°œ ë³‘ë ¬)
  Phase 2: A-2 âˆ¥ A-3 âˆ¥ B-2 âˆ¥ C-2  (4ê°œ ë³‘ë ¬)
  Phase 3: A-4 âˆ¥ B-3              (2ê°œ ë³‘ë ¬)
```

### ì˜ˆìƒ íš¨ê³¼ ìš”ì•½

| ì§€í‘œ | í˜„ì¬ | ê°œì„  í›„ | ë³€í™” |
|------|------|---------|------|
| ì†ŒìŠ¤ ì½”ë“œ ë¼ì¸ | ~73,170 | ~60,000 | -18% |
| í…ŒìŠ¤íŠ¸ ìˆ˜ | 1,975 | ~1,650 | -16% |
| í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì‹œê°„ | (í˜„ì¬ê°’) | (ê°ì†Œ ì˜ˆìƒ) | -20%+ |
| `as unknown as` ì‚¬ìš© | 5+ ê³³ | 0 | -100% |
| 400+ì¤„ ì»´í¬ë„ŒíŠ¸ | 3ê°œ | 0 | -100% |
| API ì…ë ¥ ê²€ì¦ | ì—†ìŒ | ì „ì²´ | +100% |
| ì£½ì€ ì½”ë“œ ë¹„ìœ¨ | ~20% | ~2% | -90% |

---

## ì½”ë“œë² ì´ìŠ¤ ê±´ê°•ë„ ì ìˆ˜

| ì˜ì—­ | í˜„ì¬ | ê°œì„  í›„ (ì˜ˆìƒ) |
|------|------|---------------|
| ì•„í‚¤í…ì²˜ | 7.8/10 | 8.5/10 |
| ì½”ë“œ í’ˆì§ˆ | 6.5/10 | 8.0/10 |
| íƒ€ì… ì•ˆì „ì„± | 7.5/10 | 9.0/10 |
| í…ŒìŠ¤íŠ¸ íš¨ìœ¨ | 5.0/10 | 7.5/10 |
| ìœ ì§€ë³´ìˆ˜ì„± | 6.0/10 | 8.0/10 |
| **ì¢…í•©** | **6.6/10** | **8.2/10** |

---

*ì´ ë¬¸ì„œëŠ” InfraFlow í”„ë¡œì íŠ¸ì˜ ì¢…í•© ê²€í†  ê²°ê³¼ì´ë©°, ë‹¤ë¥¸ Claude ì„¸ì…˜ì—ì„œë„ ì°¸ê³ í•˜ì—¬ ê°œì„  ì‘ì—…ì„ ì´ì–´ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.*
*ì‘ì„±: Claude Opus 4.6 | 2026-02-09*
