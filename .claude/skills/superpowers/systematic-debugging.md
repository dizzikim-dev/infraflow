# Systematic Debugging Skill

## Overview
4단계 체계적 디버깅 프로세스로 근본 원인을 분석합니다.

## Activation
- `/debug [이슈]` 명령으로 활성화
- 에러 발생 시 자동 제안

## 4-Step Process

### Step 1: 증상 수집 (Symptom Collection)
```
목표: 문제의 정확한 증상 파악

질문:
□ 정확히 무엇이 잘못되었나?
□ 예상 동작은 무엇인가?
□ 실제 동작은 무엇인가?
□ 에러 메시지가 있는가?
□ 언제부터 발생했나?
□ 재현 가능한가?

수집할 정보:
- 에러 로그
- 스택 트레이스
- 콘솔 출력
- 네트워크 요청/응답
```

### Step 2: 가설 수립 (Hypothesis Formation)
```
목표: 가능한 원인들을 나열

접근법:
1. 최근 변경사항 검토
2. 관련 코드 영역 파악
3. 의존성 확인
4. 환경 차이 확인

가설 템플릿:
"[X]가 [Y] 상태이기 때문에 [증상]이 발생한다"

예시:
- "API 엔드포인트가 변경되어 404 에러가 발생한다"
- "상태 업데이트가 비동기로 처리되어 stale 데이터가 표시된다"
```

### Step 3: 가설 검증 (Hypothesis Testing)
```
목표: 각 가설을 체계적으로 검증

방법:
1. 가장 가능성 높은 가설부터 시작
2. 최소한의 변경으로 검증
3. 로깅/디버깅 포인트 추가
4. 결과 기록

검증 도구:
- console.log / debugger
- 네트워크 탭
- React DevTools
- 단위 테스트
```

### Step 4: 근본 원인 해결 (Root Cause Fix)
```
목표: 증상이 아닌 원인 해결

체크리스트:
□ 근본 원인을 정확히 파악했는가?
□ 수정이 다른 곳에 영향을 주지 않는가?
□ 테스트가 통과하는가?
□ 같은 종류의 버그를 방지할 수 있는가?

문서화:
- 원인 설명
- 해결 방법
- 예방 조치
```

## Rules

### MUST DO
- 추측하기 전에 증거 수집
- 한 번에 하나의 가설만 테스트
- 변경 전/후 상태 기록
- 수정 후 회귀 테스트

### MUST NOT
- 무작위로 코드 수정
- 여러 가설을 동시에 테스트
- 증상만 해결하고 원인 무시
- 디버깅 코드 남겨두기

## InfraFlow 적용

### 일반적인 버그 유형
```
1. 파싱 오류
   - LLM 응답 파싱 실패
   - 예상치 못한 프롬프트 형식

2. 렌더링 오류
   - React Flow 노드 위치 오류
   - 엣지 연결 실패

3. 애니메이션 오류
   - 타이밍 불일치
   - 시퀀스 순서 오류

4. 상태 관리 오류
   - 동기화 실패
   - 메모리 누수
```

### 디버깅 도구
```typescript
// 디버깅 헬퍼
const DEBUG = process.env.NODE_ENV === 'development';

function debugLog(context: string, data: any) {
  if (DEBUG) {
    console.group(`[DEBUG] ${context}`);
    console.log(data);
    console.groupEnd();
  }
}
```

## Example

```
문제: "3티어 아키텍처" 프롬프트가 빈 다이어그램을 생성

Step 1: 증상 수집
- 입력: "3티어 아키텍처"
- 예상: 3개 노드 (Web, App, DB)
- 실제: 빈 다이어그램
- 에러: 없음

Step 2: 가설 수립
1. 파서가 "3티어"를 인식하지 못함
2. 노드 생성 로직에 버그
3. 렌더링에서 노드가 숨겨짐

Step 3: 가설 검증
- 가설 1 테스트: parseInfraPrompt 로깅 추가
  → 결과: patterns = [] (빈 배열)
  → 원인: "3티어" 패턴이 등록되지 않음

Step 4: 근본 원인 해결
- patterns.ts에 "3티어" 패턴 추가
- 테스트 케이스 추가
- 유사 패턴 검토 (N티어)
```
