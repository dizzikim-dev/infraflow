/* ========================================
   InfraFlow Global Styles
   UI UX Pro Max Design System Integration
   ======================================== */

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ========================================
   CSS Custom Properties (Design Tokens)
   ======================================== */

:root {
  /* Background Colors (Dark Mode) */
  --infra-bg-primary: #0f172a;
  --infra-bg-secondary: #1e293b;
  --infra-bg-tertiary: #334155;
  --infra-bg-hover: #475569;

  /* Node Category Colors */
  --infra-node-security: #ef4444;
  --infra-node-network: #3b82f6;
  --infra-node-compute: #22c55e;
  --infra-node-cloud: #8b5cf6;
  --infra-node-storage: #f59e0b;
  --infra-node-auth: #ec4899;

  /* Node Category Colors (Light/Fill) */
  --infra-node-security-light: #fef2f2;
  --infra-node-network-light: #eff6ff;
  --infra-node-compute-light: #f0fdf4;
  --infra-node-cloud-light: #f5f3ff;
  --infra-node-storage-light: #fffbeb;
  --infra-node-auth-light: #fdf2f8;

  /* Flow Animation Colors */
  --infra-flow-request: #60a5fa;
  --infra-flow-response: #4ade80;
  --infra-flow-blocked: #f87171;
  --infra-flow-encrypted: #a78bfa;
  --infra-flow-sync: #fb923c;

  /* Text Colors */
  --infra-text-primary: #f8fafc;
  --infra-text-secondary: #e2e8f0;
  --infra-text-muted: #94a3b8;
  --infra-text-subtle: #64748b;

  /* Border Colors */
  --infra-border-default: #334155;
  --infra-border-hover: #475569;
  --infra-border-focus: #3b82f6;

  /* Status Colors */
  --infra-status-success: #22c55e;
  --infra-status-warning: #f59e0b;
  --infra-status-error: #ef4444;
  --infra-status-info: #3b82f6;

  /* Shadows */
  --infra-shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.3);
  --infra-shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.4);
  --infra-shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.5);
  --infra-shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.6);

  /* Glow Effects */
  --infra-glow-security: 0 0 20px rgba(239, 68, 68, 0.3);
  --infra-glow-network: 0 0 20px rgba(59, 130, 246, 0.3);
  --infra-glow-compute: 0 0 20px rgba(34, 197, 94, 0.3);
  --infra-glow-cloud: 0 0 20px rgba(139, 92, 246, 0.3);
  --infra-glow-storage: 0 0 20px rgba(245, 158, 11, 0.3);
  --infra-glow-auth: 0 0 20px rgba(236, 72, 153, 0.3);

  /* Typography */
  --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  --font-mono: 'JetBrains Mono', 'Fira Code', 'Consolas', monospace;

  /* Transitions */
  --transition-fast: 150ms ease;
  --transition-base: 200ms ease;
  --transition-slow: 300ms ease;

  /* Border Radius */
  --radius-sm: 4px;
  --radius-md: 6px;
  --radius-lg: 8px;
  --radius-xl: 12px;
  --radius-2xl: 16px;
  --radius-full: 9999px;
}

/* ========================================
   Base Styles
   ======================================== */

@layer base {
  * {
    @apply border-infra-border;
  }

  body {
    @apply bg-infra-bg-primary text-infra-text-primary;
    font-family: var(--font-sans);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* Scrollbar Styling (Dark Mode) */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    background: var(--infra-bg-secondary);
  }

  ::-webkit-scrollbar-thumb {
    background: var(--infra-bg-hover);
    border-radius: var(--radius-full);
  }

  ::-webkit-scrollbar-thumb:hover {
    background: var(--infra-text-subtle);
  }

  /* Focus Ring */
  :focus-visible {
    outline: 2px solid var(--infra-border-focus);
    outline-offset: 2px;
  }
}

/* ========================================
   Component Styles
   ======================================== */

@layer components {
  /* Infrastructure Node Base */
  .infra-node {
    @apply min-w-[120px] p-4 rounded-infra-lg;
    @apply bg-infra-bg-secondary border;
    @apply shadow-infra-md transition-all duration-base;
  }

  .infra-node:hover {
    @apply shadow-infra-lg scale-105;
  }

  /* Node Category Variants */
  .infra-node-security {
    @apply border-infra-node-security shadow-glow-security;
  }

  .infra-node-network {
    @apply border-infra-node-network shadow-glow-network;
  }

  .infra-node-compute {
    @apply border-infra-node-compute shadow-glow-compute;
  }

  .infra-node-cloud {
    @apply border-infra-node-cloud shadow-glow-cloud;
  }

  .infra-node-storage {
    @apply border-infra-node-storage shadow-glow-storage;
  }

  .infra-node-auth {
    @apply border-infra-node-auth shadow-glow-auth;
  }

  /* Glassmorphism Panel */
  .glass-panel {
    @apply rounded-infra-xl p-4;
    background: rgba(30, 41, 59, 0.85);
    backdrop-filter: blur(12px);
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  /* Button Variants */
  .btn-primary {
    @apply px-4 py-2 rounded-infra-md font-medium;
    @apply bg-blue-600 text-white;
    @apply hover:bg-blue-700 transition-colors duration-fast;
  }

  .btn-secondary {
    @apply px-4 py-2 rounded-infra-md font-medium;
    @apply bg-infra-bg-tertiary text-infra-text-primary border border-infra-border-hover;
    @apply hover:bg-infra-bg-hover transition-colors duration-fast;
  }

  .btn-ghost {
    @apply px-4 py-2 rounded-infra-md font-medium;
    @apply bg-transparent text-infra-text-muted;
    @apply hover:bg-infra-bg-tertiary hover:text-infra-text-primary;
    @apply transition-colors duration-fast;
  }

  /* Input Styles */
  .input-default {
    @apply w-full px-3 py-2 rounded-infra-md;
    @apply bg-infra-bg-tertiary text-infra-text-primary;
    @apply border border-infra-border-hover;
    @apply placeholder:text-infra-text-subtle;
    @apply focus:outline-none focus:border-infra-border-focus;
    @apply transition-colors duration-fast;
  }

  /* Prompt Input (AI Native) */
  .prompt-input {
    @apply w-full px-4 py-3 pr-12 rounded-full;
    @apply bg-infra-bg-tertiary text-infra-text-primary;
    @apply border border-slate-600;
    @apply placeholder:text-slate-500;
    @apply focus:outline-none focus:border-blue-500;
    @apply transition-all duration-base;
  }
}

/* ========================================
   Utility Classes
   ======================================== */

@layer utilities {
  /* Text Gradient */
  .text-gradient {
    @apply bg-clip-text text-transparent;
    background-image: linear-gradient(135deg, #3b82f6, #8b5cf6);
  }

  /* Grid Pattern (Canvas Background) */
  .grid-pattern {
    background-image: radial-gradient(circle, var(--infra-bg-tertiary) 1px, transparent 1px);
    background-size: 20px 20px;
  }

  /* Truncate with Ellipsis */
  .truncate-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}

/* ========================================
   React Flow Overrides
   ======================================== */

.react-flow__background {
  background-color: var(--infra-bg-primary) !important;
}

.react-flow__controls {
  @apply bg-infra-bg-secondary border border-infra-border rounded-infra-lg shadow-infra-md;
}

.react-flow__controls-button {
  @apply bg-infra-bg-secondary border-infra-border text-infra-text-primary;
  @apply hover:bg-infra-bg-hover;
}

.react-flow__minimap {
  @apply bg-infra-bg-secondary border border-infra-border rounded-infra-lg;
}

.react-flow__edge-path {
  stroke: var(--infra-border-default);
  stroke-width: 2;
}

/* Animated Edges */
.react-flow__edge-path.animated-request {
  stroke: var(--infra-flow-request);
  stroke-dasharray: 5, 5;
  animation: dash 0.5s linear infinite;
}

.react-flow__edge-path.animated-response {
  stroke: var(--infra-flow-response);
  stroke-dasharray: 5, 5;
  animation: dash 0.5s linear infinite reverse;
}

.react-flow__edge-path.animated-blocked {
  stroke: var(--infra-flow-blocked);
  stroke-width: 3;
}

.react-flow__edge-path.animated-encrypted {
  stroke: var(--infra-flow-encrypted);
  stroke-width: 3;
}

.react-flow__edge-path.animated-sync {
  stroke: var(--infra-flow-sync);
  stroke-dasharray: 10, 5;
  animation: dash 0.8s linear infinite;
}

/* ========================================
   Keyframe Animations
   ======================================== */

@keyframes dash {
  to {
    stroke-dashoffset: -10;
  }
}

@keyframes pulse-glow {
  0%, 100% {
    box-shadow: var(--infra-glow-network);
  }
  50% {
    box-shadow: 0 0 30px rgba(59, 130, 246, 0.5);
  }
}

@keyframes fade-in {
  from {
    opacity: 0;
    transform: translateY(4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
